<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ZdryGlpzpzb">

	<typeAlias alias="zdryGlpzpzb" type="com.founder.zdry.bean.ZdryGlpzpzb"/>

	<!-- 添加 -->
	<insert id="save" parameterClass="zdryGlpzpzb">
		<![CDATA[
			insert into zdry_glpzpzb
	  			(ID,ZDRYGLLXDM,JGBMDM,JGBMMC,SFSJSP,DTJSZQDM,BZ, ]]> <include refid="insertXtzd"/> <![CDATA[ )
			values
	  			(#id#,#zdrygllxdm#,#jgbmdm#,#jgbmmc#,#sfsjsp#,#dtjszqdm#,#bz#, ]]> <include refid="insertXtzdVal"/> <![CDATA[ )
  		]]>
	</insert>
	
	<!-- 查询[根据主键] -->
	<select id="queryById" parameterClass="String" resultClass="zdryGlpzpzb">
		<![CDATA[ select * from zdry_glpzpzb where id = #id# ]]>
	</select>
	
	<!-- 查询[根据管理类型代码] -->
	<select id="queryByZdrygllxdm" parameterClass="String" resultClass="zdryGlpzpzb">
		<![CDATA[ select * from zdry_glpzpzb where zdrygllxdm = #zdrygllxdm#  and sfsjsp='1']]>
	</select>
	<!-- 查询[根据管理类型代码不过滤是否上级审批] -->
	<select id="queryByZdrygllxdmWhitOutSfsp" parameterClass="String" resultClass="zdryGlpzpzb">
		<![CDATA[ select * from zdry_glpzpzb where zdrygllxdm = #zdrygllxdm# ]]>
	</select>
	
	<!-- 修改 -->
	<update id="update" parameterClass="zdryGlpzpzb">
		 <![CDATA[ update zdry_glpzpzb ]]>	
		<dynamic prepend="set">
		 <isNotNull prepend="," property="id"><![CDATA[ ID=#id# ]]></isNotNull>
		 <isNotNull prepend="," property="zdrygllxdm"><![CDATA[ ZDRYGLLXDM=#zdrygllxdm# ]]></isNotNull>
		 <isNotNull prepend="," property="jgbmdm"><![CDATA[ JGBMDM=#jgbmdm# ]]></isNotNull>
		 <isNotNull prepend="," property="jgbmmc"><![CDATA[ JGBMMC=#jgbmmc# ]]></isNotNull>
		 <isNotNull prepend="," property="sfsjsp"><![CDATA[ SFSJSP=#sfsjsp# ]]></isNotNull>
		 <isNotNull prepend="," property="dtjszqdm"><![CDATA[ DTJSZQDM=#dtjszqdm# ]]></isNotNull>
		 <isNotNull prepend="," property="bz"><![CDATA[ BZ=#bz# ]]></isNotNull>
			,
			<include refid="updateXtzd"/>				
		</dynamic>
	 <![CDATA[ where id = #id#]]>	
	</update>
	
	<!-- 注销 -->
	<update id="delete" parameterClass="zdryGlpzpzb">
		<![CDATA[ update zdry_glpzpzb set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>	
	</update>
	
	<!-- 查询列表 count-->
	<select id="queryCount" parameterClass="Map" resultClass="Integer">
		<![CDATA[ select count(*) from zdry_glpzpzb t where t.XT_ZXBZ = '0' ]]>
		<isNotEmpty prepend="and" property="entity.zdrygllxdm">
			ZDRYGLLXDM = #entity.zdrygllxdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="entity.jgbmdm">
			JGBMDM = #entity.jgbmdm#
		</isNotEmpty>
	</select>
	
	<!-- 查询列表 -->
	<select id="queryList" parameterClass="Map" resultClass="zdryGlpzpzb">
		<![CDATA[ select * from ( select rownum r ,m.* from (
			select * from zdry_glpzpzb t where t.XT_ZXBZ = '0' ]]>
			<isNotEmpty prepend="and" property="entity.zdrygllxdm">
				ZDRYGLLXDM = #entity.zdrygllxdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="entity.jgbmdm">
				JGBMDM = #entity.jgbmdm#
			</isNotEmpty>
		<![CDATA[ order by $sort$ $order$) m  
		where rownum <= #end# ) where r > #begin# ]]>
	</select>
	
	<!-- 查询【动态纪实周期】不为空的记录 -->
	<select id="queryByDtjszqdmNotNull" resultClass="zdryGlpzpzb">
		<![CDATA[ select * from zdry_glpzpzb t where t.XT_ZXBZ = '0' and dtjszqdm is not null]]>
	</select>

</sqlMap>