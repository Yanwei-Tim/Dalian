<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ZdryHsb">

	<typeAlias alias="zdryHsb" type="com.founder.zdry.bean.ZdryHsb" />
	<typeAlias alias="zdryHsbZdls" type="com.founder.zdry.bean.ZdryHsbZdls" />

<!-- 查询单条（根据主键） -->
	<select id="queryById" parameterClass="String" resultClass="zdryHsb">
		<![CDATA[ select * from ZDRY_ZDRYHSB t where ID = #id# and XT_ZXBZ = '0' and rownum = 1 ]]>
	</select>

	<!-- 更新 -->
	<update id="update" parameterClass="zdryHsb">
		<![CDATA[ update ZDRY_ZDRYHSB ]]>
		<dynamic prepend="set">
		 <isNotNull prepend="," property="id"><![CDATA[ ID=#id# ]]></isNotNull>
 <isNotNull prepend="," property="sjly"><![CDATA[ SJLY=#sjly# ]]></isNotNull>
 <isNotNull prepend="," property="lyid"><![CDATA[ LYID=#lyid# ]]></isNotNull>
 <isNotNull prepend="," property="sspcs"><![CDATA[ SSPCS=#sspcs# ]]></isNotNull>
 <isNotNull prepend="," property="hszt"><![CDATA[ HSZT=#hszt# ]]></isNotNull>
 <isNotNull prepend="," property="zdrygllxdm"><![CDATA[ ZDRYGLLXDM=#zdrygllxdm# ]]></isNotNull>
 <isNotNull prepend="," property="zdrylbdm"><![CDATA[ ZDRYLBDM=#zdrylbdm# ]]></isNotNull>
 <isNotNull prepend="," property="cyzjdm"><![CDATA[ CYZJDM=#cyzjdm# ]]></isNotNull>
 <isNotNull prepend="," property="zjhm"><![CDATA[ ZJHM=#zjhm# ]]></isNotNull>
 <isNotNull prepend="," property="xm"><![CDATA[ XM=#xm# ]]></isNotNull>
 <isNotNull prepend="," property="xbdm"><![CDATA[ XBDM=#xbdm# ]]></isNotNull>
 <isNotNull prepend="," property="mzdm"><![CDATA[ MZDM=#mzdm# ]]></isNotNull>
 <isNotNull prepend="," property="csrq"><![CDATA[ CSRQ=#csrq# ]]></isNotNull>
 <isNotNull prepend="," property="dz_hjdzssxdm"><![CDATA[ DZ_HJDZSSXDM=#dz_hjdzssxdm# ]]></isNotNull>
 <isNotNull prepend="," property="dz_hjdzmlpdm"><![CDATA[ DZ_HJDZMLPDM=#dz_hjdzmlpdm# ]]></isNotNull>
 <isNotNull prepend="," property="dz_hjdzmlpxz"><![CDATA[ DZ_HJDZMLPXZ=#dz_hjdzmlpxz# ]]></isNotNull>
 <isNotNull prepend="," property="dz_hjdzdm"><![CDATA[ DZ_HJDZDM=#dz_hjdzdm# ]]></isNotNull>
 <isNotNull prepend="," property="dz_hjdzxz"><![CDATA[ DZ_HJDZXZ=#dz_hjdzxz# ]]></isNotNull>
 <isNotNull prepend="," property="dz_jzdzssxdm"><![CDATA[ DZ_JZDZSSXDM=#dz_jzdzssxdm# ]]></isNotNull>
 <isNotNull prepend="," property="dz_jzdzmlpdm"><![CDATA[ DZ_JZDZMLPDM=#dz_jzdzmlpdm# ]]></isNotNull>
 <isNotNull prepend="," property="dz_jzdzmlpxz"><![CDATA[ DZ_JZDZMLPXZ=#dz_jzdzmlpxz# ]]></isNotNull>
 <isNotNull prepend="," property="dz_jzdzdm"><![CDATA[ DZ_JZDZDM=#dz_jzdzdm# ]]></isNotNull>
 <isNotNull prepend="," property="dz_jzdzxz"><![CDATA[ DZ_JZDZXZ=#dz_jzdzxz# ]]></isNotNull>
 <isNotNull prepend="," property="saryzcdm"><![CDATA[ SARYZCDM=#saryzcdm# ]]></isNotNull>
 <isNotNull prepend="," property="hykydm"><![CDATA[ HYKYDM=#hykydm# ]]></isNotNull>
 <isNotNull prepend="," property="brbjcjdm"><![CDATA[ BRBJCJDM=#brbjcjdm# ]]></isNotNull>
 <isNotNull prepend="," property="zwcjdm"><![CDATA[ ZWCJDM=#zwcjdm# ]]></isNotNull>
 <isNotNull prepend="," property="jchddq"><![CDATA[ JCHDDQ=#jchddq# ]]></isNotNull>
 <isNotNull prepend="," property="xxcjyjdm"><![CDATA[ XXCJYJDM=#xxcjyjdm# ]]></isNotNull>
 <isNotNull prepend="," property="lg_sqr"><![CDATA[ LG_SQR=#lg_sqr# ]]></isNotNull>
 <isNotNull prepend="," property="lg_sqrid"><![CDATA[ LG_SQRID=#lg_sqrid# ]]></isNotNull>
 <isNotNull prepend="," property="lg_sqrq"><![CDATA[ LG_SQRQ=#lg_sqrq# ]]></isNotNull>
 <isNotNull prepend="," property="lg_spr"><![CDATA[ LG_SPR=#lg_spr# ]]></isNotNull>
 <isNotNull prepend="," property="lg_sprid"><![CDATA[ LG_SPRID=#lg_sprid# ]]></isNotNull>
 <isNotNull prepend="," property="lg_sprq"><![CDATA[ LG_SPRQ=#lg_sprq# ]]></isNotNull>
 <isNotNull prepend="," property="lg_spyj"><![CDATA[ LG_SPYJ=#lg_spyj# ]]></isNotNull>
 <isNotNull prepend="," property="jgdx_jglbdm"><![CDATA[ JGDX_JGLBDM=#jgdx_jglbdm# ]]></isNotNull>
 <isNotNull prepend="," property="jgdx_jgdwjgdm"><![CDATA[ JGDX_JGDWJGDM=#jgdx_jgdwjgdm# ]]></isNotNull>
 <isNotNull prepend="," property="jgdx_jgdwmc"><![CDATA[ JGDX_JGDWMC=#jgdx_jgdwmc# ]]></isNotNull>
 <isNotNull prepend="," property="jgdx_pjjgmc"><![CDATA[ JGDX_PJJGMC=#jgdx_pjjgmc# ]]></isNotNull>
 <isNotNull prepend="," property="zdrk_glffdm"><![CDATA[ ZDRK_GLFFDM=#zdrk_glffdm# ]]></isNotNull>
 <isNotNull prepend="," property="zdrk_lglydm"><![CDATA[ ZDRK_LGLYDM=#zdrk_lglydm# ]]></isNotNull>
 <isNotNull prepend="," property="xfbmdm"><![CDATA[ XFBMDM=#xfbmdm# ]]></isNotNull>,
			<include refid="updateXtzd" />
		</dynamic>
		<![CDATA[ where ID = #id#]]>
	</update>

	<!-- 注销 -->
	<update id="delete" parameterClass="zdryHsb">
		<![CDATA[ update ZDRY_ZDRYHSB set ]]><include refid="deleteXtzd" /><![CDATA[ where ID = #id# ]]>
	</update>


	<!-- 查询列表 -->
	<select id="queryCount" parameterClass="Map" resultClass="Integer">
		<![CDATA[ select count(*) from ZDRY_ZDRYHSB t where XT_ZXBZ = '0' and t.sspcs=#zdryHsb.sspcs# and t.HSZT='0'  ]]>
		<isNotEmpty prepend="and" property="zdryHsb.zdrygllxdm">
			zdrygllxdm =
			#zdryHsb.zdrygllxdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.xm">
			xm like
			'%$zdryHsb.xm$%'
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.zjhm">
			zjhm = #zdryHsb.zjhm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.xbdm">
			xbdm = #zdryHsb.xbdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.dz_jzdzxz">
			dz_jzdzxz like
			'%$zdryHsb.dz_jzdzxz$%'
		</isNotEmpty>
	</select>
	<select id="query" parameterClass="Map" resultClass="zdryHsb">
		<![CDATA[ select * from ( select rownum r ,m.* from (
			select * from ZDRY_ZDRYHSB t where t.XT_ZXBZ = '0' and t.sspcs=#zdryHsb.sspcs# and t.HSZT='0' ]]>
		<isNotEmpty prepend="and" property="zdryHsb.zdrygllxdm">
			zdrygllxdm =
			#zdryHsb.zdrygllxdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.xm">
			xm like
			'%$zdryHsb.xm$%'
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.zjhm">
			zjhm = #zdryHsb.zjhm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.xbdm">
			xbdm = #zdryHsb.xbdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryHsb.dz_jzdzxz">
			dz_jzdzxz like
			'%$zdryHsb.dz_jzdzxz$%'
		</isNotEmpty>
			<![CDATA[ order by $sort$ $order$) m  
		where rownum <= #end# ) where r > #begin# ]]>
	</select>

	<!-- 新增 -->
	<insert id="saveZdls" parameterClass="zdryHsbZdls">
		<![CDATA[ insert into ZDRY_ZDRYHSB_ZDLS (ID,HSID,YSSPCS,YDZ_JZDZSSXDM,YDZ_JZDZMLPDM,YDZ_JZDZMLPXZ,YDZ_JZDZDM,YDZ_JZDZXZ,
			SSPCS,DZ_JZDZSSXDM,DZ_JZDZMLPDM,DZ_JZDZMLPXZ,DZ_JZDZDM,DZ_JZDZXZ, ]]><include refid="insertXtzd"/>)
		<![CDATA[ values (#id#,#hsid#,#ysspcs#,#ydz_jzdzssxdm#,#ydz_jzdzmlpdm#,#ydz_jzdzmlpxz#,#ydz_jzdzdm#,#ydz_jzdzxz#,
			#sspcs#,#dz_jzdzssxdm#,#dz_jzdzmlpdm#,#dz_jzdzmlpxz#,#dz_jzdzdm#,#dz_jzdzxz#,]]>
			<include refid="insertXtzdVal"/>)
	</insert>
	
</sqlMap>