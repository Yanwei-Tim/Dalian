<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ZdryJsmbpzb">

	<typeAlias alias="zdryJsmbpzb" type="com.founder.zdry.bean.ZdryJsmbpzb"/>

	<!-- 添加 -->
	<insert id="save" parameterClass="zdryJsmbpzb">
		<![CDATA[
			insert into zdry_jsmbpzb
	  			(ID,ZDRYGLLXDM,MBMC,MBNR,SFMR,BZ, ]]> <include refid="insertXtzd"/> <![CDATA[ )
			values
	  			(#id#,#zdrygllxdm#,#mbmc#,#mbnr#,#sfmr#,#bz#, ]]> <include refid="insertXtzdVal"/> <![CDATA[ )
  		]]>
	</insert>
	
	<!-- 查询[根据主键] -->
	<select id="queryById" parameterClass="String" resultClass="zdryJsmbpzb">
		<![CDATA[ select * from zdry_jsmbpzb where id = #id# ]]>
	</select>
	
	<!-- 修改 -->
	<update id="update" parameterClass="zdryJsmbpzb">
		 <![CDATA[ update zdry_jsmbpzb ]]>	
		<dynamic prepend="set">
		 <isNotNull prepend="," property="zdrygllxdm"><![CDATA[ ZDRYGLLXDM=#zdrygllxdm# ]]></isNotNull>
		 <isNotNull prepend="," property="mbmc"><![CDATA[ MBMC=#mbmc# ]]></isNotNull>
		 <isNotNull prepend="," property="mbnr"><![CDATA[ MBNR=#mbnr# ]]></isNotNull>
		 <isNotNull prepend="," property="sfmr"><![CDATA[ SFMR=#sfmr# ]]></isNotNull>
		 <isNotNull prepend="," property="bz"><![CDATA[ BZ=#bz# ]]></isNotNull>
			,
			<include refid="updateXtzd"/>				
		</dynamic>
	 <![CDATA[ where id = #id#]]>	
	</update>
	
	<!-- 查询列表count -->
	<select id="queryCount" parameterClass="Map" resultClass="Integer">
		<![CDATA[ select count(*) from zdry_jsmbpzb t where t.XT_ZXBZ = '0' ]]>
		<isNotEmpty prepend="and" property="entity.zdrygllxdm">
			ZDRYGLLXDM = #entity.zdrygllxdm#
		</isNotEmpty>
	</select>
	
	<!-- 查询列表 -->
	<select id="queryList" parameterClass="Map" resultClass="zdryJsmbpzb">
		<![CDATA[ select * from ( select rownum r ,m.* from (
			select * from zdry_jsmbpzb t where t.XT_ZXBZ = '0' ]]>
		<isNotEmpty prepend="and" property="entity.zdrygllxdm">
			ZDRYGLLXDM = #entity.zdrygllxdm#
		</isNotEmpty>
		<![CDATA[ order by $sort$ $order$) m  
		where rownum <= #end# ) where r > #begin# ]]>
	</select>
	
	<!-- 注销 -->
	<update id="delete" parameterClass="zdryJsmbpzb">
		<![CDATA[ update zdry_jsmbpzb set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>	
	</update>
	
	<!-- 根据条件查询 -->
	<select id="queryForList" parameterClass="zdryJsmbpzb" resultClass="zdryJsmbpzb">
		<![CDATA[
			select * from zdry_jsmbpzb t where t.XT_ZXBZ = '0' ]]>
		<isNotEmpty prepend="and" property="zdrygllxdm">
			ZDRYGLLXDM = #zdrygllxdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="sfmr">
			SFMR = #sfmr#
		</isNotEmpty>
	</select>
	
	<!-- 修改 -->
	<update id="updateBeforeSetDefault" parameterClass="zdryJsmbpzb">
		 <![CDATA[ update zdry_jsmbpzb ]]>	
		<dynamic prepend="set">
		 <isNotNull prepend="," property="sfmr"><![CDATA[ SFMR=#sfmr# ]]></isNotNull>
			,
			<include refid="updateXtzd"/>				
		</dynamic>
	 <![CDATA[ where ZDRYGLLXDM = #zdrygllxdm#]]>	
	</update>

</sqlMap>