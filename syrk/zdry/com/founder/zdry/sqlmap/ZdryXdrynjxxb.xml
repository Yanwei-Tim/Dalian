<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ZdryXdrynjxxb">
	
	<typeAlias alias="zdryXdrynjxxb" type="com.founder.zdry.bean.ZdryXdrynjxxb" />

	<select id="queryList" resultClass="zdryXdrynjxxb" parameterClass="String">
		<![CDATA[ select t.* from ZDRY_XDRYNJXXB t where t.ZDRYID = #zdryid# and t.XT_ZXBZ = '0' order by t.XT_LRSJ desc ]]>
	</select>

	<!-- 查询单条（根据主键） -->
	<select id="queryById" parameterClass="String" resultClass="zdryXdrynjxxb">
		<![CDATA[ select t.* from ZDRY_XDRYNJXXB t where  t.id = #id# and t.XT_ZXBZ = '0'  ]]>
	</select>
	<select id="queryByZdryid" parameterClass="String" resultClass="zdryXdrynjxxb">
		<![CDATA[ select t.* from ZDRY_XDRYNJXXB t where  t.zdryid = #id# and t.XT_ZXBZ = '0'  ]]>
	</select>

	<!-- 新增 -->
	<insert id="save" parameterClass="zdryXdrynjxxb">
		<![CDATA[ insert into ZDRY_XDRYNJXXB (ID,ZDRYID,NJ_RQ,NJJGDM,QD_RQ,]]><include refid="insertXtzd"/>)
		<![CDATA[ values (#id#,#zdryid#,#nj_rq#,#njjgdm#,#qd_rq#,]]><include refid="insertXtzdVal"/>)
	</insert>
	
	<!-- 更新 -->
	<update id="update" parameterClass="zdryXdrynjxxb">
		<![CDATA[ update ZDRY_XDRYNJXXB ]]>	
		<dynamic prepend="set">
			 <isNotNull prepend="," property="nj_rq"><![CDATA[ NJ_RQ=#nj_rq# ]]></isNotNull>
			 <isNotNull prepend="," property="njjgdm"><![CDATA[ NJJGDM=#njjgdm# ]]></isNotNull>
			 <isNotNull prepend="," property="qd_rq"><![CDATA[ QD_RQ=#qd_rq# ]]></isNotNull>
			 ,<include refid="updateXtzd"/>				
		</dynamic>
		<![CDATA[ where ID = #id#]]>	
	</update>
	
	<!-- 注销 -->
	<update id="delete" parameterClass="zdryXdrynjxxb">
		<![CDATA[ update ZDRY_XDRYNJXXB set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>	
	</update>
	
</sqlMap>