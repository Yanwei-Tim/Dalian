<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ZdryZdryzb">
	
	<typeAlias alias="zdryZdryzb" type="com.founder.zdry.bean.ZdryZdryzb" />
	<typeAlias alias="zdryZdryzbVO" type="com.founder.zdry.vo.ZdryZdryzbVO" />
	<typeAlias alias="zdrylgxxVO" type="com.founder.zdry.vo.ZdrylgxxVO" />
	
	<!-- 查询人员所有类型列表 -->
	<select id="queryList" parameterClass="String" resultClass="zdryZdryzb">
		<![CDATA[  select * from ZDRY_ZDRYZB t where  ryid = #ryid#  and glzt in (3,2,5)  and  t.XT_ZXBZ = '0']]>
	</select>
	
	<!-- 根据身份证查询重口类型 -->
	<select id="queryZdrylxdmByGmsfhm" parameterClass="String"
		resultClass="zdryZdryzb">
		 select * from ZDRY_ZDRYZB t where  glzt in (1,2,3,5) and zdrygllxdm='7'  and  t.XT_ZXBZ = '0' and ZJHM= #zjhm# and 	CYZJDM='111'
	</select>

	<!-- 查询单条（根据主键） -->
	<select id="queryById" parameterClass="String" resultClass="zdryZdryzb">
		<![CDATA[ select * from ZDRY_ZDRYZB t where ID = #id#  and rownum = 1  ]]>
	</select>
	
	<select id="queryZdryBySyrkid" parameterClass="String" resultClass="zdryZdryzbVO">
		<![CDATA[ select t.*,g.jgbmdm ,g.jgbmmc,g.sfsjsp from ZDRY_ZDRYZB t left join  ZDRY_GLPZPZB g
  			on t.zdrygllxdm = g.zdrygllxdm and g.xt_zxbz = '0' where  t.syrkid = #id# and t.glzt in (3,2,1,5)  and t.XT_ZXBZ = '0'  ]]>
	</select>
	
	<select id="queryZdryVOByRyid" parameterClass="String" resultClass="zdryZdryzbVO">
		<![CDATA[ select t.*,g.jgbmdm ,g.jgbmmc,g.sfsjsp from ZDRY_ZDRYZB t left join  ZDRY_GLPZPZB g
  			on t.zdrygllxdm = g.zdrygllxdm and g.xt_zxbz = '0' where  t.ryid = #id# and t.glzt in (3,2,1,5)  and t.XT_ZXBZ = '0'  ]]>
	</select>

	<!-- 新增 -->
	<insert id="save" parameterClass="zdryZdryzb">
		<![CDATA[ insert into ZDRY_ZDRYZB (ID]]>
		<isNotEmpty prepend="," property="ryid"><![CDATA[ ryid]]></isNotEmpty>
		<isNotEmpty prepend="," property="syrkid"><![CDATA[ syrkid]]></isNotEmpty>
		<isNotEmpty prepend="," property="cyzjdm"><![CDATA[ cyzjdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="zjhm"><![CDATA[ zjhm]]></isNotEmpty>
		<isNotEmpty prepend="," property="xm"><![CDATA[ xm]]></isNotEmpty>
		<isNotEmpty prepend="," property="xbdm"><![CDATA[ xbdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="mzdm"><![CDATA[ mzdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="csrq"><![CDATA[ csrq]]></isNotEmpty>
		<isNotEmpty prepend="," property="lxdh"><![CDATA[ lxdh]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzssxdm"><![CDATA[ dz_hjdzssxdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzmlpdm"><![CDATA[ dz_hjdzmlpdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzmlpxz"><![CDATA[ dz_hjdzmlpxz]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzdm"><![CDATA[ dz_hjdzdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzxz"><![CDATA[ dz_hjdzxz]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzssxdm"><![CDATA[ dz_jzdzssxdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzmlpdm"><![CDATA[ dz_jzdzmlpdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzmlpxz"><![CDATA[ dz_jzdzmlpxz]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzdm"><![CDATA[ dz_jzdzdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzxz"><![CDATA[ dz_jzdzxz]]></isNotEmpty>
		<isNotEmpty prepend="," property="zdrygllxdm"><![CDATA[ zdrygllxdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="glzt"><![CDATA[ glzt]]></isNotEmpty>
		<isNotEmpty prepend="," property="zdlgbmid"><![CDATA[ zdlgbmid]]></isNotEmpty>
		<isNotEmpty prepend="," property="zdlgbmmc"><![CDATA[ zdlgbmmc]]></isNotEmpty>
		<isNotEmpty prepend="," property="sfjm"><![CDATA[ sfjm]]></isNotEmpty>
		<isNotEmpty prepend="," property="sfzkdm"><![CDATA[ sfzkdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="ssfxjdm"><![CDATA[ ssfxjdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="sspcsdm"><![CDATA[ sspcsdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="sszrqdm"><![CDATA[ sszrqdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="zywtjxsbx"><![CDATA[zywtjxsbx]]></isNotEmpty>
		<isNotEmpty prepend="," property="jgssxdm"><![CDATA[ jgssxdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="hjd_ssxjgajgdm"><![CDATA[ hjd_ssxjgajgdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="hjd_sspcsdm"><![CDATA[ hjd_sspcsdm]]></isNotEmpty>
		<isNotEmpty prepend="," property="hjd_sssq"><![CDATA[ hjd_sssq]]></isNotEmpty>
		<isNotEmpty prepend="," property="jzd_szdsdm"><![CDATA[jzd_szdsdm]]></isNotEmpty>,
		<include refid="insertXtzd"/>)
		<![CDATA[ values (#id# ]]>
		<isNotEmpty prepend="," property="ryid"><![CDATA[#ryid#]]></isNotEmpty>
		<isNotEmpty prepend="," property="syrkid"><![CDATA[#syrkid#]]></isNotEmpty>
		<isNotEmpty prepend="," property="cyzjdm"><![CDATA[#cyzjdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="zjhm"><![CDATA[ #zjhm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="xm"><![CDATA[ #xm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="xbdm"><![CDATA[#xbdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="mzdm"><![CDATA[ #mzdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="csrq"><![CDATA[ #csrq#]]></isNotEmpty>
		<isNotEmpty prepend="," property="lxdh"><![CDATA[#lxdh#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzssxdm"><![CDATA[ #dz_hjdzssxdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzmlpdm"><![CDATA[ #dz_hjdzmlpdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzmlpxz"><![CDATA[ #dz_hjdzmlpxz#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzdm"><![CDATA[#dz_hjdzdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_hjdzxz"><![CDATA[#dz_hjdzxz#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzssxdm"><![CDATA[ #dz_jzdzssxdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzmlpdm"><![CDATA[ #dz_jzdzmlpdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzmlpxz"><![CDATA[ #dz_jzdzmlpxz#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzdm"><![CDATA[ #dz_jzdzdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="dz_jzdzxz"><![CDATA[ #dz_jzdzxz#]]></isNotEmpty>
		<isNotEmpty prepend="," property="zdrygllxdm"><![CDATA[ #zdrygllxdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="glzt"><![CDATA[ #glzt#]]></isNotEmpty>
		<isNotEmpty prepend="," property="zdlgbmid"><![CDATA[  #zdlgbmid#]]></isNotEmpty>
		<isNotEmpty prepend="," property="zdlgbmmc"><![CDATA[ #zdlgbmmc#]]></isNotEmpty>
		<isNotEmpty prepend="," property="sfjm"><![CDATA[ #sfjm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="sfzkdm"><![CDATA[ #sfzkdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="ssfxjdm"><![CDATA[ #ssfxjdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="sspcsdm"><![CDATA[#sspcsdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="sszrqdm"><![CDATA[ #sszrqdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="zywtjxsbx"><![CDATA[ #zywtjxsbx#]]></isNotEmpty>		
		<isNotEmpty prepend="," property="jgssxdm"><![CDATA[ #jgssxdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="hjd_ssxjgajgdm"><![CDATA[ #hjd_ssxjgajgdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="hjd_sspcsdm"><![CDATA[#hjd_sspcsdm#]]></isNotEmpty>
		<isNotEmpty prepend="," property="hjd_sssq"><![CDATA[ #hjd_sssq#]]></isNotEmpty>
		<isNotEmpty prepend="," property="jzd_szdsdm"><![CDATA[ #jzd_szdsdm#]]></isNotEmpty>,
		<include refid="insertXtzdVal"/>)
	</insert>
	
	<!-- 更新 -->
	<update id="update" parameterClass="zdryZdryzb">
		<![CDATA[ update ZDRY_ZDRYZB ]]>	
		<dynamic prepend="set">
			<isNotNull prepend="," property="ryid"><![CDATA[ ryid = #ryid#]]></isNotNull>
			<isNotNull prepend="," property="syrkid"><![CDATA[syrkid = #syrkid#]]></isNotNull>
			<isNotNull prepend="," property="cyzjdm"><![CDATA[cyzjdm= #cyzjdm#]]></isNotNull>
			<isNotNull prepend="," property="zjhm"><![CDATA[ zjhm=#zjhm#]]></isNotNull>
			<isNotNull prepend="," property="xm"><![CDATA[ xm=#xm#]]></isNotNull>
			<isNotNull prepend="," property="xbdm"><![CDATA[xbdm =#xbdm#]]></isNotNull>
			<isNotNull prepend="," property="mzdm"><![CDATA[ mzdm=#mzdm#]]></isNotNull>
			<isNotNull prepend="," property="csrq"><![CDATA[ csrq = #csrq#]]></isNotNull>
			<isNotNull prepend="," property="lxdh"><![CDATA[lxdh = #lxdh#]]></isNotNull>
			<isNotNull prepend="," property="dz_hjdzssxdm"><![CDATA[dz_hjdzssxdm= #dz_hjdzssxdm#]]></isNotNull>
			<isNotNull prepend="," property="dz_hjdzmlpdm"><![CDATA[ dz_hjdzmlpdm=#dz_hjdzmlpdm#]]></isNotNull>
			<isNotNull prepend="," property="dz_hjdzmlpxz"><![CDATA[ dz_hjdzmlpxz=#dz_hjdzmlpxz#]]></isNotNull>
			<isNotNull prepend="," property="dz_hjdzdm"><![CDATA[dz_hjdzdm =#dz_hjdzdm#]]></isNotNull>
			<isNotNull prepend="," property="dz_hjdzxz"><![CDATA[ dz_hjdzxz=#dz_hjdzxz#]]></isNotNull>
			<isNotNull prepend="," property="dz_jzdzssxdm"><![CDATA[ dz_jzdzssxdm = #dz_jzdzssxdm#]]></isNotNull>
			<isNotNull prepend="," property="dz_jzdzmlpdm"><![CDATA[dz_jzdzmlpdm = #dz_jzdzmlpdm#]]></isNotNull>
			<isNotNull prepend="," property="dz_jzdzmlpxz"><![CDATA[dz_jzdzmlpxz= #dz_jzdzmlpxz#]]></isNotNull>
			<isNotNull prepend="," property="dz_jzdzdm"><![CDATA[ dz_jzdzdm=#dz_jzdzdm#]]></isNotNull>
			<isNotNull prepend="," property="dz_jzdzxz"><![CDATA[ dz_jzdzxz=#dz_jzdzxz#]]></isNotNull>
			<isNotNull prepend="," property="zdrygllxdm"><![CDATA[zdrygllxdm =#zdrygllxdm#]]></isNotNull>
			<isNotNull prepend="," property="glzt"><![CDATA[ glzt=#glzt#]]></isNotNull>
			<isNotNull prepend="," property="zdlgbmid"><![CDATA[ zdlgbmid = #zdlgbmid#]]></isNotNull>
			<isNotNull prepend="," property="zdlgbmmc"><![CDATA[zdlgbmmc = #zdlgbmmc#]]></isNotNull>
			<isNotNull prepend="," property="sfjm"><![CDATA[sfjm= #sfjm#]]></isNotNull>
			<isNotNull prepend="," property="sfzkdm"><![CDATA[ sfzkdm=#sfzkdm#]]></isNotNull>
			<isNotNull prepend="," property="ssfxjdm"><![CDATA[ ssfxjdm=#ssfxjdm#]]></isNotNull>
			<isNotNull prepend="," property="sspcsdm"><![CDATA[sspcsdm =#sspcsdm#]]></isNotNull>
			<isNotNull prepend="," property="sszrqdm"><![CDATA[ sszrqdm=#sszrqdm#]]></isNotNull>
			<isNotNull prepend="," property="zywtjxsbx"><![CDATA[ zywtjxsbx=#zywtjxsbx#]]></isNotNull>
			<isNotNull prepend="," property="xt_zxbz"><![CDATA[ XT_ZXBZ=#xt_zxbz#]]></isNotNull>			
			<isNotEmpty prepend="," property="jgssxdm"><![CDATA[ jgssxdm=#jgssxdm#]]></isNotEmpty>
		    <isNotEmpty prepend="," property="hjd_ssxjgajgdm"><![CDATA[ hjd_ssxjgajgdm=#hjd_ssxjgajgdm#]]></isNotEmpty>
			<isNotEmpty prepend="," property="hjd_sspcsdm"><![CDATA[hjd_sspcsdm=#hjd_sspcsdm#]]></isNotEmpty>
			<isNotEmpty prepend="," property="hjd_sssq"><![CDATA[ hjd_sssq=#hjd_sssq#]]></isNotEmpty>
			<isNotEmpty prepend="," property="jzd_szdsdm"><![CDATA[ jzd_szdsdm=#jzd_szdsdm#]]></isNotEmpty>
			
			,
			<include refid="updateXtzd"/>				
		</dynamic>
		<![CDATA[ where ID = #id#]]>	
	</update>
	
	<!-- 注销 -->
	<update id="delete" parameterClass="zdryZdryzb">
		<![CDATA[ update ZDRY_ZDRYZB set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>	
	</update>
	
	
	<!-- 管理列表 -->
	<select id="queryCount" parameterClass="Map" resultClass="Integer">
		<![CDATA[ select count(*) from ZDRY_ZDRYZB t , BZDZ_ADD_MLDZDXB b where 1=1  ]]>
		<isNotEmpty prepend="and" property="zdryZdryzb.zdrygllxdm">
			t.zdrygllxdm = #zdryZdryzb.zdrygllxdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryZdryzb.xm">
			t.xm like '%$zdryZdryzb.xm$%'
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryZdryzb.zjhm">
			t.zjhm = #zdryZdryzb.zjhm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryZdryzb.xbdm">
			t.xbdm = #zdryZdryzb.xbdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryZdryzb.dz_jzdzxz">
			t.dz_jzdzxz like '%$zdryZdryzb.dz_jzdzxz$%'
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryZdryzb.sszrqdm">
				t.SSZRQDM = #zdryZdryzb.sszrqdm#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="zdryZdryzb.condition">
			     <![CDATA[ t.zjhm || t.xm||t.dz_jzdzxz   like '%' || #zdryZdryzb.condition# || '%']]>
		</isNotEmpty>
		<![CDATA[ and (t.dz_jzdzmlpdm = b.mldzid or (t.dz_hjdzmlpdm = b.mldzid and  t.dz_jzdzmlpdm is null))  and t.glzt in (3,2,5) and  t.XT_ZXBZ = '0'  and b.xt_zxbz='0' ]]>
	</select>
	<select id="query" parameterClass="Map" resultClass="zdryZdryzbVO">
		<![CDATA[ select * from ( select rownum r ,m.* from (
			select t.*,b.zbx , b.zby from ZDRY_ZDRYZB t  , BZDZ_ADD_MLDZDXB b where 1=1 ]]>
			<isNotEmpty prepend="and" property="zdryZdryzb.zdrygllxdm">
				t.zdrygllxdm = #zdryZdryzb.zdrygllxdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzb.xm">
				t.xm like '%$zdryZdryzb.xm$%'
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzb.zjhm">
				t.zjhm = #zdryZdryzb.zjhm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzb.xbdm">
				t.xbdm = #zdryZdryzb.xbdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzb.dz_jzdzxz">
				t.dz_jzdzxz like '%$zdryZdryzb.dz_jzdzxz$%'
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzb.sszrqdm">
				t.SSZRQDM = #zdryZdryzb.sszrqdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzb.condition">
				     <![CDATA[ t.zjhm || t.xm||t.dz_jzdzxz  like '%' || #zdryZdryzb.condition#|| '%']]>
			</isNotEmpty>
				<![CDATA[  and (t.dz_jzdzmlpdm = b.mldzid or (t.dz_hjdzmlpdm = b.mldzid and  t.dz_jzdzmlpdm is null)) and t.glzt in (3,2,5)  and  t.XT_ZXBZ = '0' and b.xt_zxbz='0' order by t.$sort$ $order$) m  where rownum <= #end# ) where r > #begin# ]]>
	</select>
	
	
	<!-- 重点人员地图查询 -->
	<select id="queryZdryOnPT" parameterClass="Map" resultClass="zdryZdryzbVO">
		<![CDATA[ select * from ( select rownum r ,m.* from (
			select t.*,p.zbx , p.zby from ZDRY_ZDRYZB t left join BZDZ_ADD_MLDZDXB_PT p on t.dz_jzdzmlpdm = p.mldzid where 1=1 ]]>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.zdrygllxdm">
				t.zdrygllxdm = #zdryZdryzbVO.zdrygllxdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.xm">
				t.xm like '%$zdryZdryzbVO.xm$%'
			</isNotEmpty>
			
			<isNotEmpty prepend="and" property="zdryZdryzbVO.cyzjdm">
				t.cyzjdm = #zdryZdryzbVO.cyzjdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.zjhm">
				t.zjhm like '%$zdryZdryzbVO.zjhm$%'
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.xbdm">
				t.xbdm = #zdryZdryzbVO.xbdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.mzdm">
				t.mzdm = #zdryZdryzbVO.mzdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.sszrqdm">
				t.SSZRQDM = #zdryZdryzbVO.sszrqdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.sspcsdm">
				t.SSPCSDM = #zdryZdryzbVO.sspcsdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.ssfxjdm">
				t.SSFXJDM = #zdryZdryzbVO.ssfxjdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.glzt">
				t.xt_zxbz = #zdryZdryzbVO.glzt#
			</isNotEmpty>
				<![CDATA[   and  t.XT_ZXBZ = '0' and t.glzt in (3,2,5)  ]]>			
			<isEqual property="zdryZdryzbVO.type" compareValue="1" prepend="AND">
		     	 <![CDATA[SDE.ST_WITHIN(p.SHAPE,SDE.ST_POLYGON('polygon((]]> 
		     	 <isNotNull property="zdryZdryzbVO.zbz"><![CDATA[ $zdryZdryzbVO.zbz$ ]]></isNotNull> ))',
		     	 <isNotNull property="zdryZdryzbVO.srid"><![CDATA[ $zdryZdryzbVO.srid$]]></isNotNull>
		     	 <![CDATA[ ))=1]]>
		     </isEqual>			
		    <isEqual property="zdryZdryzbVO.type" compareValue="2" prepend="AND">
		     	 <![CDATA[SDE.ST_WITHIN(p.SHAPE,SDE.ST_BUFFER(SDE.ST_POINT('point(]]> 
		     	 <isNotNull property="zdryZdryzbVO.zbz"><![CDATA[$zdryZdryzbVO.zbz$]]></isNotNull>)',
		     	 <isNotNull property="zdryZdryzbVO.srid"><![CDATA[$zdryZdryzbVO.srid$]]></isNotNull>),
		     	 <isNotNull property="zdryZdryzbVO.mapRadius"><![CDATA[$zdryZdryzbVO.mapRadius$]]></isNotNull>
		     	 <![CDATA[))=1]]>
		     </isEqual>
		    <isEqual property="zdryZdryzbVO.type" compareValue="3" prepend="AND">
		     	 <![CDATA[SDE.ST_ENVINTERSECTS(p.SHAPE,]]>
		     	 <isNotNull property="zdryZdryzbVO.zbz"><![CDATA[$zdryZdryzbVO.zbz$]]></isNotNull>
		     	 <![CDATA[)=1]]>
		     </isEqual>		     
   		<![CDATA[) m  
		where rownum <= #end# ) 
			where r > #begin#  ]]>
	</select>
	<select id="queryCountZdryOnPT" parameterClass="Map" resultClass="Integer">
			<![CDATA[SELECT COUNT(1)  from ZDRY_ZDRYZB t left join BZDZ_ADD_MLDZDXB_PT p on t.dz_jzdzmlpdm = p.mldzid where 1=1
   								  ]]>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.zdrygllxdm">
				t.zdrygllxdm = #zdryZdryzbVO.zdrygllxdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.xm">
				t.xm like '%$zdryZdryzbVO.xm$%'
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.cyzjdm">
				t.cyzjdm = #zdryZdryzbVO.cyzjdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.zjhm">
				t.zjhm like '%$zdryZdryzbVO.zjhm$%'
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.xbdm">
				t.xbdm = #zdryZdryzbVO.xbdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.mzdm">
				t.mzdm = #zdryZdryzbVO.mzdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.sszrqdm">
				t.SSZRQDM = #zdryZdryzbVO.sszrqdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.sspcsdm">
				t.SSPCSDM = #zdryZdryzbVO.sspcsdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.ssfxjdm">
				t.SSFXJDM = #zdryZdryzbVO.ssfxjdm#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="zdryZdryzbVO.glzt">
				t.xt_zxbz = #zdryZdryzbVO.glzt#
			</isNotEmpty>
				<![CDATA[  and  t.XT_ZXBZ = '0' and t.glzt in (3,2,5)  ]]>	
			<isEqual property="zdryZdryzbVO.type" compareValue="1" prepend="AND">
		     	 <![CDATA[SDE.ST_WITHIN(p.SHAPE,SDE.ST_POLYGON('polygon((]]> 
		     	 <isNotNull property="zdryZdryzbVO.zbz"><![CDATA[ $zdryZdryzbVO.zbz$ ]]></isNotNull> ))',
		     	 <isNotNull property="zdryZdryzbVO.srid"><![CDATA[ $zdryZdryzbVO.srid$]]></isNotNull>
		     	 <![CDATA[ ))=1]]>
		     </isEqual>			
		    <isEqual property="zdryZdryzbVO.type" compareValue="2" prepend="AND">
		     	 <![CDATA[SDE.ST_WITHIN(p.SHAPE,SDE.ST_BUFFER(SDE.ST_POINT('point(]]> 
		     	 <isNotNull property="zdryZdryzbVO.zbz"><![CDATA[$zdryZdryzbVO.zbz$]]></isNotNull>)',
		     	 <isNotNull property="zdryZdryzbVO.srid"><![CDATA[$zdryZdryzbVO.srid$]]></isNotNull>),
		     	 <isNotNull property="zdryZdryzbVO.mapRadius"><![CDATA[$zdryZdryzbVO.mapRadius$]]></isNotNull>
		     	 <![CDATA[))=1]]>
		     </isEqual>
		    <isEqual property="zdryZdryzbVO.type" compareValue="3" prepend="AND">
		     	 <![CDATA[SDE.ST_ENVINTERSECTS(p.SHAPE,]]>
		     	 <isNotNull property="zdryZdryzbVO.zbz"><![CDATA[$zdryZdryzbVO.zbz$]]></isNotNull>
		     	 <![CDATA[)=1]]>
		     </isEqual>		
		</select>	
		
	
	
			<!-- 获取空间图层srid -->
	<select id="queryShapetableSrid" parameterClass="map" resultClass="int">
				select srid from sde.st_geometry_columns t where t.table_name=UPPER(#tableName#) and owner=UPPER(#shapeDbName#)
	</select>	
	
	<select id="queryBySyrkidAndgllx" parameterClass="Map" resultClass="zdryZdryzb">
		<![CDATA[ select * from ZDRY_ZDRYZB t where syrkid = #syrkid#  and zdrygllxdm = #gllx# and XT_ZXBZ = '0' and rownum = 1    ]]>
	</select>
	
	<select id="queryLgxxByZdryid" parameterClass="String" resultClass="zdrylgxxVO">
		<![CDATA[ select t.id zdryid ,t.zdrygllxdm , t.zdlgbmmc , y.sqr_xm sqr , y.sqsj , y.spr_xm  spr , y.spsj from ZDRY_ZDRYZB t , zdry_lczywblb l , zdry_ywspb y where t.id =#value# and t.id = l.zdryid and l.id = y.ywbid and t.glzt in (2,3,5) 
and l.ywcljg = '1' and l.ywlx = '1' and t.xt_zxbz = '0'  and l.xt_zxbz = '0'  and y.xt_zxbz = '0'  ]]>
	</select>
	
		<!-- 根据查询可以注销的实有人口 是不是重口 -->
	<select id="queryCountBySyrk" parameterClass="String" resultClass="Integer">
		<![CDATA[ select count(1) from ZDRY_ZDRYZB t where t.XT_ZXBZ = '0' and t.SYRKID = #syrkId# and (t.GLZT = '1' or t.GLZT = '2' or t.GLZT = '3' or t.GLZT = '5')]]>
		
	</select>
	
</sqlMap>