<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ZdryShbzdryxxb">
	
	<typeAlias alias="zdryShbzdryxxb" type="com.founder.zdrygl.bean.ZdryShbzdryxxb" />
	<typeAlias alias="zdryZdryzb" type="com.founder.zdrygl.bean.ZdryZdryzb" />
	
	<!-- 查询单条（根据主键） -->
	<select id="queryById" parameterClass="String" resultClass="zdryShbzdryxxb">
		<![CDATA[ select * from ZDRY_SHBZDRYXXB t where ID = #id#  and rownum = 1 ]]>
	</select>

	<!-- 新增 -->
	<insert id="save" parameterClass="zdryShbzdryxxb">
		   <![CDATA[ insert into ZDRY_SHBZDRYXXB (ID,CYZJDM,ZJHM,XM,XBDM,CSRQ,MZDM,LXDH,JGSSXDM,HJDSSSXDM,HJD_SSXJGAJGDM,
		                                          HJD_SSPCSDM,HJD_XZQHDM,HJD_MLPDM,HJD_MLPXZ,HJD_DZID,HJD_DZXZ,HJD_DZMS,
		                                          HJD_SQ,SSFXJDM,SSPCSDM,DZ_JZD_MLPXZ,DZ_JZDZMLPDM,DZ_JZDZDM,DZ_JZDZSSXDM,
		                                          DZ_JZDZXZ,JZD_SQ,SFSWDM,AJLBDM,ZATDDM,JYAQ,CFJG,JCHDDQ,JL,ZWBH,SJMJ,RKBM,ZYWTJXSBX,BZ,]]><include refid="insertXtzd"/>)
		   <![CDATA[ values (#id#,#cyzjdm#,#zjhm#,#xm#,#xbdm#,#csrq#,#mzdm#,#lxdh#,#jgssxdm#,#hjdsssxdm#,#hjd_ssxjgajgdm#,
		                          #hjd_sspcsdm#,#hjd_xzqhdm#,#hjd_mlpdm#,#hjd_mlpxz#,#hjd_dzid#,#hjd_dzxz#,#hjd_dzms#,#hjd_sq#,
		                          #ssfxjdm#,#sspcsdm#,#dz_jzd_mlpxz#,#dz_jzdzmlpdm#,#dz_jzdzdm#,#dz_jzdzssxdm#,#dz_jzdzxz#,#jzd_sq#,
		                         #sfswdm#,#ajlbdm#,#zatddm#,#jyaq#,#cfjg#,#jchddq#,#jl#,#zwbh#,#sjmj#,#rkbm#,#zywtjxsbx#,#bz#,]]>
			<include refid="insertXtzdVal"/>)
	</insert>	
	<!-- 更新 -->
	<update id="update" parameterClass="zdryShbzdryxxb">
		<![CDATA[ update ZDRY_SHBZDRYXXB ]]>	
		<dynamic prepend="set">
					
					<isNotNull prepend="," property="cyzjdm"><![CDATA[ cyzjdm = #cyzjdm#]]></isNotNull>
					<isNotNull prepend="," property="zjhm"><![CDATA[zjhm = #zjhm#]]></isNotNull>
					<isNotNull prepend="," property="xm"><![CDATA[xm= #xm#]]></isNotNull>
					<isNotNull prepend="," property="xbdm"><![CDATA[ xbdm=#xbdm#]]></isNotNull>
					<isNotNull prepend="," property="csrq"><![CDATA[ csrq=#csrq#]]></isNotNull>
					<isNotNull prepend="," property="mzdm"><![CDATA[mzdm =#mzdm#]]></isNotNull>
					<isNotNull prepend="," property="lxdh"><![CDATA[ lxdh=#lxdh#]]></isNotNull>
					<isNotNull prepend="," property="jgssxdm"><![CDATA[ jgssxdm=#jgssxdm#]]></isNotNull>
					<isNotNull prepend="," property="hjdsssxdm"><![CDATA[hjdsssxdm=#hjdsssxdm#]]></isNotNull>
					<isNotNull prepend="," property="hjd_ssxjgajgdm"><![CDATA[hjd_ssxjgajgdm =#hjd_ssxjgajgdm#]]></isNotNull>
					<isNotNull prepend="," property="hjd_sspcsdm"><![CDATA[ hjd_sspcsdm=#hjd_sspcsdm#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_xzqhdm"><![CDATA[ hjd_xzqhdm=#hjd_xzqhdm#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_mlpdm"><![CDATA[ hjd_mlpdm=#hjd_mlpdm#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_mlpxz"><![CDATA[ hjd_mlpxz=#hjd_mlpxz#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_dzid"><![CDATA[ hjd_dzid=#hjd_dzid#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_dzxz"><![CDATA[ hjd_dzxz=#hjd_dzxz#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_dzms"><![CDATA[ hjd_dzms=#hjd_dzms#]]></isNotNull>					
					<isNotNull prepend="," property="hjd_sq"><![CDATA[ hjd_sq=#hjd_sq#]]></isNotNull>					
					<isNotNull prepend="," property="ssfxjdm"><![CDATA[ ssfxjdm=#ssfxjdm#]]></isNotNull>					
					<isNotNull prepend="," property="sspcsdm"><![CDATA[ sspcsdm=#sspcsdm#]]></isNotNull>					
					<isNotNull prepend="," property="dz_jzd_mlpxz"><![CDATA[ dz_jzd_mlpxz=#dz_jzd_mlpxz#]]></isNotNull>					
					<isNotNull prepend="," property="dz_jzdzmlpdm"><![CDATA[ dz_jzdzmlpdm=#dz_jzdzmlpdm#]]></isNotNull>					
					<isNotNull prepend="," property="dz_jzdzdm"><![CDATA[ dz_jzdzdm=#dz_jzdzdm#]]></isNotNull>					
					<isNotNull prepend="," property="dz_jzdzssxdm"><![CDATA[ dz_jzdzssxdm=#dz_jzdzssxdm#]]></isNotNull>				
					<isNotNull prepend="," property="dz_jzdzxz"><![CDATA[ dz_jzdzxz=#dz_jzdzxz#]]></isNotNull>										
					<isNotNull prepend="," property="jzd_sq"><![CDATA[ jzd_sq=#jzd_sq#]]></isNotNull>					
					<isNotNull prepend="," property="sfswdm"><![CDATA[ sfswdm=#sfswdm#]]></isNotNull>					
					<isNotNull prepend="," property="ajlbdm"><![CDATA[ ajlbdm=#ajlbdm#]]></isNotNull>					
					<isNotNull prepend="," property="zatddm"><![CDATA[ zatddm=#zatddm#]]></isNotNull>					
					<isNotNull prepend="," property="jyaq"><![CDATA[ jyaq=#jyaq#]]></isNotNull>			
					<isNotNull prepend="," property="zywtjxsbx"><![CDATA[ zywtjxsbx=#zywtjxsbx#]]></isNotNull>		
					<isNotNull prepend="," property="cfjg"><![CDATA[ cfjg=#cfjg#]]></isNotNull>					
					<isNotNull prepend="," property="jchddq"><![CDATA[ jchddq=#jchddq#]]></isNotNull>	
					<isNotNull prepend="," property="jl"><![CDATA[ jl=#jl#]]></isNotNull>	
					<isNotNull prepend="," property="zwbh"><![CDATA[ zwbh=#zwbh#]]></isNotNull>	
					<isNotNull prepend="," property="sjmj"><![CDATA[ sjmj=#sjmj#]]></isNotNull>	
					<isNotNull prepend="," property="rkbm"><![CDATA[ rkbm=#rkbm#]]></isNotNull>		
					<isNotNull prepend="," property="bz"><![CDATA[ bz=#bz#]]></isNotNull>
					,
			<include refid="updateXtzd"/>				
		</dynamic>
		<![CDATA[ where ID = #id#]]>	
	</update>
	
	<!-- 注销 -->
	<update id="delete" parameterClass="zdryShbzdryxxb">
		<![CDATA[ update ZDRY_SHBZDRYXXB set ]]><include refid="deleteXtzd"/><![CDATA[ where ID = #id# ]]>	
	</update>
	
	
	
		<!-- 涉环保重点人员列表数据  -->
	<select id="query" parameterClass="Map" resultClass="zdryShbzdryxxb">
	       <![CDATA[SELECT * FROM ( SELECT ROWNUM R ,M.* FROM (
		       SELECT * 
		          FROM  ZDRY_SHBZDRYXXB T1 left join ZDRY_ZDRYZB T2 ON T1.ID=T2.ID 
		       WHERE T2.XT_ZXBZ = '0' and T2.ZDRYGLLXDM='07' and T2.GLZT in(2,3,5) and (T1.xt_lrrbmid=#userOrgCode# or ssfxjdm=#userOrgCode#)]]> 
		       <isNotEmpty prepend="AND" property="zdryShbzdryxxb.xm">
		            T1.XM LIKE '%'||#zdryShbzdryxxb.xm#||'%'
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="zdryShbzdryxxb.zjhm">
		       		T1.ZJHM LIKE '%'||#zdryShbzdryxxb.zjhm#||'%'		       
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="zdryShbzdryxxb.dz_jzdzxz">
		       		T1.dz_jzdzxz LIKE '%'||#zdryShbzdryxxb.dz_jzdzxz#||'%'		       
		       </isNotEmpty>
		  <![CDATA[  ORDER BY T2.$sort$ $order$) M  WHERE ROWNUM <= #end# ) WHERE R > #begin#]]> 
	</select>
	
	<!--列表总数统计 -->
    <select id="queryCount" parameterClass="Map" resultClass="Integer">
		    <![CDATA[
		       SELECT count(*) 
		          FROM  ZDRY_SHBZDRYXXB T1 left join ZDRY_ZDRYZB T2 ON T1.ID=T2.ID 
		       WHERE T2.XT_ZXBZ = '0' and T2.ZDRYGLLXDM='07' and T2.GLZT in(2,3,5) and (T1.xt_lrrbmid=#userOrgCode# or ssfxjdm=#userOrgCode#) ]]> 
		       <isNotEmpty prepend="AND" property="zdryShbzdryxxb.xm">
		            T1.XM LIKE '%'||#zdryShbzdryxxb.xm#||'%'
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="zdryShbzdryxxb.zjhm">
		       		T1.ZJHM LIKE '%'||#zdryShbzdryxxb.zjhm#||'%'		       
		       </isNotEmpty>
		       <isNotEmpty prepend="AND" property="zdryShbzdryxxb.dz_jzdzxz">
		       		T1.dz_jzdzxz LIKE '%'||#zdryShbzdryxxb.dz_jzdzxz#||'%'		       
		       </isNotEmpty>
	</select>
</sqlMap>